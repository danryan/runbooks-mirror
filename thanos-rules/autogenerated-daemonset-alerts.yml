# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./thanos-rules-jsonnet/daemonset-alerts.jsonnet TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
groups:
- name: daemonset_alerts.yaml
  partial_response_strategy: warn
  rules:
  - - alert: KubeDaemonSetRolloutStuck
      for: 15m
      annotations:
        title: Daemonset Rollout is incomplete.
        description: "\"Only {{ $value }} of the desired Pods of DaemonSet {{ $labels.namespace
          }}/{{ $labels.daemonset }} are scheduled and ready.\" \n"
        runbook: docs/uncategorized/kubernetes.md
      labels:
        alert_type: cause
        pager: pagerduty
        severity: s2
      expr: |
        (
            kube_daemonset_status_number_ready{job="kube-state-metrics", daemonset="calico-node"}
            /
            kube_daemonset_status_desired_number{job="kube-state-metrics, daemonset="calico-node"} * 100 < 100
        )
    - alert: KubeDaemonSetNotScheduled
      for: 15m
      annotations:
        title: DaemonSet Pod(s) unable to be scheduled
        description: '{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset
          }} are not scheduled.'
        runbook: docs/uncategorized/kubernetes.md
      labels:
        alert_type: cause
        pager: pagerduty
        severity: s2
      expr: |
        (
            kube_daemonset_status_desired_number_scheduled{job="kube-state-metrics", daemonset="calico-node"}
            -
            kube_daemonset_status_current_number_scheduled{job="kube-state-metrics", daemonset="calico-node"} > 0
        )
    - alert: KubeDaemonSetMisScheduled
      for: 15m
      annotations:
        title: DaemonSet Pod(s) unable to be scheduled
        description: '{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset
          }} are running where they are not supposed to run.'
        runbook: docs/uncategorized/kubernetes.md
      labels:
        alert_type: cause
        pager: pagerduty
        severity: s2
      expr: kube_daemonset_status_number_misscheduled{job="kube-state-metrics", daemonset="calico-node"}
        > 0
- name: daemonset_alerts_nonurgent.yaml
  partial_response_strategy: warn
  rules:
  - - alert: KubeDaemonSetRolloutStuck
      for: 15m
      annotations:
        title: Daemonset Rollout is incomplete.
        description: "\"Only {{ $value }} of the desired Pods of DaemonSet {{ $labels.namespace
          }}/{{ $labels.daemonset }} are scheduled and ready.\" \n"
        runbook: docs/uncategorized/kubernetes.md
      labels:
        alert_type: cause
        severity: s3
      expr: |
        (
            kube_daemonset_status_number_ready{job="kube-state-metrics", daemonset="fluentd"}
            /
            kube_daemonset_status_desired_number{job="kube-state-metrics, daemonset="fluentd"} * 100 < 100
        )
    - alert: KubeDaemonSetNotScheduled
      for: 15m
      annotations:
        title: DaemonSet Pod(s) unable to be scheduled
        description: '{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset
          }} are not scheduled.'
        runbook: docs/uncategorized/kubernetes.md
      labels:
        alert_type: cause
        severity: s3
      expr: |
        (
            kube_daemonset_status_desired_number_scheduled{job="kube-state-metrics", daemonset="fluentd"}
            -
            kube_daemonset_status_current_number_scheduled{job="kube-state-metrics", daemonset="fluentd"} > 0
        )
    - alert: KubeDaemonSetMisScheduled
      for: 15m
      annotations:
        title: DaemonSet Pod(s) unable to be scheduled
        description: '{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset
          }} are running where they are not supposed to run.'
        runbook: docs/uncategorized/kubernetes.md
      labels:
        alert_type: cause
        severity: s3
      expr: kube_daemonset_status_number_misscheduled{job="kube-state-metrics", daemonset="fluentd"}
        > 0
