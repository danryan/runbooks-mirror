## PostgreSQL dead tuples
ALERT PostgreSQLTooManyDeadTuples
  IF max(pg_stat_table_n_dead_tup{environment="prd"}) > 50000
  FOR 1h
  LABELS {severity="critical", channel="production"}
  ANNOTATIONS {
    title="PostgreSQL dead tuples is too large",
    description="PostgreSQL has way too many dead tuples, check which table is not being vacuumed properly and adjust settings",
    runbook="troubleshooting/postgresql.md",
  }
