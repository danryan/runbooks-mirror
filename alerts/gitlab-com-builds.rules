## Pending builds for projects with shared runners enabled
ALERT TooManyPendingBuildsOnSharedRunnerProject
  IF topk(1, predict_linear(ci_builds_total{shared_runners_enabled_projects="1",status="pending",fqdn="db1.cluster.gitlab.com"}[30m], 3600)) > 1000
  FOR 5m
  LABELS {channel="ci"}
  ANNOTATIONS {
    title="The number of pending builds for projects with shared runners will be too high in 1h: {{$value | printf \"%.2f\" }}",
    description="The number of pending builds for projects with shared runners is increasing and will be too high in 1h ({{$value}}). This may suggest problems with auto-scaling provider or Runner stability. You should check Runner's logs. Check http://performance.gitlab.net/dashboard/db/ci.",
  }
