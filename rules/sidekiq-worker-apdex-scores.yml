# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./scripts/generate-sidekiq-worker-apdex-scores.sh TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
"groups": 
- "name": "sidekiq-worker-apdex-scores.rules"
  "rules": 
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"0.1\", worker=~\"AdminEmailWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"AdminEmailWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "0.1"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"0.25\", worker=~\"ObjectPool::DestroyWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"ObjectPool::DestroyWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "0.25"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"0.5\", worker=~\"AuthorizedProjectsWorker|LdapSyncWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"AuthorizedProjectsWorker|LdapSyncWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "0.5"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"1\", worker=~\"BuildSuccessWorker|ExpireJobCacheWorker|Geo::ContainerRepositorySyncDispatchWorker|Gitlab::GithubImport::RefreshImportJidWorker|GitlabShellWorker|LdapAllGroupsSyncWorker|PipelineMetricsWorker|PipelineSuccessWorker|PipelineUpdateWorker|ProjectImportScheduleWorker|PseudonymizerWorker|RequestsProfilesWorker|ScheduleMigrateExternalDiffsWorker|TodosDestroyer::GroupPrivateWorker|UpdateHeadPipelineForMergeRequestWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"BuildSuccessWorker|ExpireJobCacheWorker|Geo::ContainerRepositorySyncDispatchWorker|Gitlab::GithubImport::RefreshImportJidWorker|GitlabShellWorker|LdapAllGroupsSyncWorker|PipelineMetricsWorker|PipelineSuccessWorker|PipelineUpdateWorker|ProjectImportScheduleWorker|PseudonymizerWorker|RequestsProfilesWorker|ScheduleMigrateExternalDiffsWorker|TodosDestroyer::GroupPrivateWorker|UpdateHeadPipelineForMergeRequestWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "1"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"10\", worker=~\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper|ArchiveTraceWorker|BuildFinishedWorker|BuildQueueWorker|ClusterProvisionWorker|ClusterWaitForAppInstallationWorker|Clusters::Applications::WaitForUninstallAppWorker|Deployments::SuccessWorker|DetectRepositoryLanguagesWorker|EmailReceiverWorker|Gitlab::GithubImport::Stage::ImportBaseDataWorker|Gitlab::GithubImport::Stage::ImportIssuesAndDiffNotesWorker|IncidentManagement::ProcessAlertWorker|IssueDueSchedulerWorker|MailScheduler::IssueDueWorker|MailScheduler::NotificationServiceWorker|MergeWorker|NewIssueWorker|NewMergeRequestWorker|PagesDomainRemovalCronWorker|PipelineProcessWorker|RebaseWorker|RemoveExpiredGroupLinksWorker|WaitForClusterCreationWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper|ArchiveTraceWorker|BuildFinishedWorker|BuildQueueWorker|ClusterProvisionWorker|ClusterWaitForAppInstallationWorker|Clusters::Applications::WaitForUninstallAppWorker|Deployments::SuccessWorker|DetectRepositoryLanguagesWorker|EmailReceiverWorker|Gitlab::GithubImport::Stage::ImportBaseDataWorker|Gitlab::GithubImport::Stage::ImportIssuesAndDiffNotesWorker|IncidentManagement::ProcessAlertWorker|IssueDueSchedulerWorker|MailScheduler::IssueDueWorker|MailScheduler::NotificationServiceWorker|MergeWorker|NewIssueWorker|NewMergeRequestWorker|PagesDomainRemovalCronWorker|PipelineProcessWorker|RebaseWorker|RemoveExpiredGroupLinksWorker|WaitForClusterCreationWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "10"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"2.5\", worker=~\"AutoDevops::DisableWorker|BuildHooksWorker|ChatNotificationWorker|DeleteDiffFilesWorker|ExpirePipelineCacheWorker|Gitlab::GithubImport::AdvanceStageWorker|Gitlab::GithubImport::ImportDiffNoteWorker|Gitlab::GithubImport::ImportIssueWorker|Gitlab::GithubImport::ImportNoteWorker|IrkerWorker|Namespaces::ScheduleAggregationWorker|ObjectPool::ScheduleJoinWorker|PagesDomainVerificationWorker|PipelineNotificationWorker|ProcessCommitWorker|ProjectCacheWorker|ProjectDailyStatisticsWorker|PruneOldEventsWorker|RemoteMirrorNotificationWorker|RepositoryRemoveRemoteWorker|StageUpdateWorker|SyncSecurityReportsToReportApprovalRulesWorker|TodosDestroyer::ConfidentialIssueWorker|TodosDestroyer::PrivateFeaturesWorker|TodosDestroyer::ProjectPrivateWorker|UpdateMergeRequestsWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"AutoDevops::DisableWorker|BuildHooksWorker|ChatNotificationWorker|DeleteDiffFilesWorker|ExpirePipelineCacheWorker|Gitlab::GithubImport::AdvanceStageWorker|Gitlab::GithubImport::ImportDiffNoteWorker|Gitlab::GithubImport::ImportIssueWorker|Gitlab::GithubImport::ImportNoteWorker|IrkerWorker|Namespaces::ScheduleAggregationWorker|ObjectPool::ScheduleJoinWorker|PagesDomainVerificationWorker|PipelineNotificationWorker|ProcessCommitWorker|ProjectCacheWorker|ProjectDailyStatisticsWorker|PruneOldEventsWorker|RemoteMirrorNotificationWorker|RepositoryRemoveRemoteWorker|StageUpdateWorker|SyncSecurityReportsToReportApprovalRulesWorker|TodosDestroyer::ConfidentialIssueWorker|TodosDestroyer::PrivateFeaturesWorker|TodosDestroyer::ProjectPrivateWorker|UpdateMergeRequestsWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "2.5"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"25\", worker=~\"Ci::BuildPrepareWorker|Ci::CreateCrossProjectPipelineWorker|ClusterInstallAppWorker|ClusterPatchAppWorker|Clusters::Applications::UninstallWorker|CreateGithubWebhookWorker|CreateGpgSignatureWorker|CreatePipelineWorker|DeleteStoredFilesWorker|EmailsOnPushWorker|Gitlab::GithubImport::Stage::FinishImportWorker|Gitlab::GithubImport::Stage::ImportRepositoryWorker|HistoricalDataWorker|NewEpicWorker|PagesDomainSslRenewalCronWorker|PostReceive|PruneWebHookLogsWorker|ReactiveCachingWorker|RemoveUnreferencedLfsObjectsWorker|RepositoryArchiveCacheWorker|RepositoryCleanupWorker|RepositoryImportWorker|RepositoryUpdateRemoteMirrorWorker|RunPipelineScheduleWorker|TrendingProjectsWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"Ci::BuildPrepareWorker|Ci::CreateCrossProjectPipelineWorker|ClusterInstallAppWorker|ClusterPatchAppWorker|Clusters::Applications::UninstallWorker|CreateGithubWebhookWorker|CreateGpgSignatureWorker|CreatePipelineWorker|DeleteStoredFilesWorker|EmailsOnPushWorker|Gitlab::GithubImport::Stage::FinishImportWorker|Gitlab::GithubImport::Stage::ImportRepositoryWorker|HistoricalDataWorker|NewEpicWorker|PagesDomainSslRenewalCronWorker|PostReceive|PruneWebHookLogsWorker|ReactiveCachingWorker|RemoveUnreferencedLfsObjectsWorker|RepositoryArchiveCacheWorker|RepositoryCleanupWorker|RepositoryImportWorker|RepositoryUpdateRemoteMirrorWorker|RunPipelineScheduleWorker|TrendingProjectsWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "25"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"5\", worker=~\"AutoMergeProcessWorker|BuildProcessWorker|Ci::BuildScheduleWorker|ClusterWaitForIngressIpAddressWorker|CreateNoteDiffFileWorker|Deployments::FinishedWorker|ElasticCommitIndexerWorker|ElasticIndexerWorker|Geo::SidekiqCronConfigWorker|GitGarbageCollectWorker|Gitlab::GithubImport::ImportPullRequestWorker|Gitlab::GithubImport::Stage::ImportLfsObjectsWorker|Gitlab::GithubImport::Stage::ImportNotesWorker|Gitlab::GithubImport::Stage::ImportPullRequestsWorker|Namespaces::RootStatisticsWorker|NewNoteWorker|ObjectPool::CreateWorker|ObjectPool::JoinWorker|PagesDomainSslRenewalWorker|PipelineHooksWorker|ProjectServiceWorker|RepositoryUpdateMirrorWorker|StuckMergeJobsWorker|TodosDestroyer::EntityLeaveWorker|UpdateAllMirrorsWorker|UpdateProjectStatisticsWorker|WebHookWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"AutoMergeProcessWorker|BuildProcessWorker|Ci::BuildScheduleWorker|ClusterWaitForIngressIpAddressWorker|CreateNoteDiffFileWorker|Deployments::FinishedWorker|ElasticCommitIndexerWorker|ElasticIndexerWorker|Geo::SidekiqCronConfigWorker|GitGarbageCollectWorker|Gitlab::GithubImport::ImportPullRequestWorker|Gitlab::GithubImport::Stage::ImportLfsObjectsWorker|Gitlab::GithubImport::Stage::ImportNotesWorker|Gitlab::GithubImport::Stage::ImportPullRequestsWorker|Namespaces::RootStatisticsWorker|NewNoteWorker|ObjectPool::CreateWorker|ObjectPool::JoinWorker|PagesDomainSslRenewalWorker|PipelineHooksWorker|ProjectServiceWorker|RepositoryUpdateMirrorWorker|StuckMergeJobsWorker|TodosDestroyer::EntityLeaveWorker|UpdateAllMirrorsWorker|UpdateProjectStatisticsWorker|WebHookWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "5"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": "sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"50\", worker=~\"CleanupContainerRepositoryWorker|DeleteContainerRepositoryWorker|ExportCsvWorker|PagesDomainVerificationCronWorker|PagesWorker|RepositoryForkWorker|StuckImportJobsWorker\"}[1m])) by (environment, worker, stage, tier, type)\n   /\n   sum(rate(sidekiq_jobs_completion_time_seconds_bucket{le=\"+Inf\", worker=~\"CleanupContainerRepositoryWorker|DeleteContainerRepositoryWorker|ExportCsvWorker|PagesDomainVerificationCronWorker|PagesWorker|RepositoryForkWorker|StuckImportJobsWorker\"}[1m])) by (environment, worker, stage, tier, type) >= 0"
    "labels": 
      "threshold": "50"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
