# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./scripts/generate-sidekiq-worker-apdex-scores.sh TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
"groups": 
- "name": "sidekiq-worker-apdex-scores.rules"
  "rules": 
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="0.1", queue=~"cronjob:admin_email|cronjob:ldap_all_groups_sync|cronjob:ldap_sync|cronjob:requests_profiles|cronjob:schedule_migrate_external_diffs|github_importer:github_import_refresh_import_jid|pipeline_processing:build_success|pipeline_processing:pipeline_success|project_daily_statistics|todos_destroyer:todos_destroyer_private_features"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"cronjob:admin_email|cronjob:ldap_all_groups_sync|cronjob:ldap_sync|cronjob:requests_profiles|cronjob:schedule_migrate_external_diffs|github_importer:github_import_refresh_import_jid|pipeline_processing:build_success|pipeline_processing:pipeline_success|project_daily_statistics|todos_destroyer:todos_destroyer_private_features"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "0.1"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="0.25", queue=~"auto_devops:auto_devops_disable|create_evidence|cronjob:geo_sidekiq_cron_config|cronjob:pseudonymizer|delete_diff_files|epics:epics_update_epics_dates|git_garbage_collect|github_importer:github_import_import_diff_note|github_importer:github_import_import_issue|github_importer:github_import_import_note|gitlab_shell|object_pool:object_pool_destroy|object_pool:object_pool_join|object_pool:object_pool_schedule_join|pipeline_cache:expire_job_cache|pipeline_default:ci_pipeline_bridge_status|pipeline_default:pipeline_metrics|pipeline_processing:pipeline_update|pipeline_processing:stage_update|pipeline_processing:update_head_pipeline_for_merge_request|todos_destroyer:todos_destroyer_confidential_issue|todos_destroyer:todos_destroyer_group_private|todos_destroyer:todos_destroyer_project_private|update_external_pull_requests|update_namespace_statistics:namespaces_root_statistics|update_namespace_statistics:namespaces_schedule_aggregation"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"auto_devops:auto_devops_disable|create_evidence|cronjob:geo_sidekiq_cron_config|cronjob:pseudonymizer|delete_diff_files|epics:epics_update_epics_dates|git_garbage_collect|github_importer:github_import_import_diff_note|github_importer:github_import_import_issue|github_importer:github_import_import_note|gitlab_shell|object_pool:object_pool_destroy|object_pool:object_pool_join|object_pool:object_pool_schedule_join|pipeline_cache:expire_job_cache|pipeline_default:ci_pipeline_bridge_status|pipeline_default:pipeline_metrics|pipeline_processing:pipeline_update|pipeline_processing:stage_update|pipeline_processing:update_head_pipeline_for_merge_request|todos_destroyer:todos_destroyer_confidential_issue|todos_destroyer:todos_destroyer_group_private|todos_destroyer:todos_destroyer_project_private|update_external_pull_requests|update_namespace_statistics:namespaces_root_statistics|update_namespace_statistics:namespaces_schedule_aggregation"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "0.25"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="0.5", queue=~"pipeline_default:pipeline_notification|pipeline_default:sync_security_reports_to_report_approval_rules|pipeline_processing:build_finished|pipeline_processing:ci_build_schedule|project_cache|refresh_license_compliance_checks|update_project_statistics"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"pipeline_default:pipeline_notification|pipeline_default:sync_security_reports_to_report_approval_rules|pipeline_processing:build_finished|pipeline_processing:ci_build_schedule|project_cache|refresh_license_compliance_checks|update_project_statistics"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "0.5"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="1", queue=~"authorized_projects|chat_notification|create_note_diff_file|cronjob:pages_domain_removal_cron|cronjob:stuck_merge_jobs|deployment:deployments_finished|deployment:deployments_success|elastic_indexer|github_import_advance_stage|github_importer:github_import_stage_import_base_data|github_importer:github_import_stage_import_notes|github_importer:github_import_stage_import_pull_requests|jira_connect:jira_connect_sync_merge_request|object_pool:object_pool_create|pages_domain_verification|pipeline_cache:expire_pipeline_cache|pipeline_hooks:build_hooks|pipeline_hooks:pipeline_hooks|pipeline_processing:build_queue|project_import_schedule|project_service|repository_remove_remote"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"authorized_projects|chat_notification|create_note_diff_file|cronjob:pages_domain_removal_cron|cronjob:stuck_merge_jobs|deployment:deployments_finished|deployment:deployments_success|elastic_indexer|github_import_advance_stage|github_importer:github_import_stage_import_base_data|github_importer:github_import_stage_import_notes|github_importer:github_import_stage_import_pull_requests|jira_connect:jira_connect_sync_merge_request|object_pool:object_pool_create|pages_domain_verification|pipeline_cache:expire_pipeline_cache|pipeline_hooks:build_hooks|pipeline_hooks:pipeline_hooks|pipeline_processing:build_queue|project_import_schedule|project_service|repository_remove_remote"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "1"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="10", queue=~"cronjob:ci_archive_traces_cron|cronjob:remove_expired_group_links|detect_repository_languages|gcp_cluster:cluster_install_app|gcp_cluster:cluster_patch_app|gcp_cluster:clusters_applications_uninstall|github_importer:github_import_import_pull_request|mail_scheduler:mail_scheduler_issue_due|merge|pages_domain_ssl_renewal|project_destroy|reactive_caching|rebase"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"cronjob:ci_archive_traces_cron|cronjob:remove_expired_group_links|detect_repository_languages|gcp_cluster:cluster_install_app|gcp_cluster:cluster_patch_app|gcp_cluster:clusters_applications_uninstall|github_importer:github_import_import_pull_request|mail_scheduler:mail_scheduler_issue_due|merge|pages_domain_ssl_renewal|project_destroy|reactive_caching|rebase"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "10"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="2.5", queue=~"auto_merge:auto_merge_process|cronjob:pages_domain_verification_cron|cronjob:prune_old_events|cronjob:update_all_mirrors|email_receiver|gcp_cluster:cluster_wait_for_ingress_ip_address|github_importer:github_import_stage_finish_import|github_importer:github_import_stage_import_issues_and_diff_notes|github_importer:github_import_stage_import_lfs_objects|incident_management:incident_management_process_prometheus_alert|mail_scheduler:mail_scheduler_notification_service|mailers|new_issue|notifications:new_release|pipeline_background:archive_trace|pipeline_processing:pipeline_process|process_commit|update_merge_requests|web_hook"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"auto_merge:auto_merge_process|cronjob:pages_domain_verification_cron|cronjob:prune_old_events|cronjob:update_all_mirrors|email_receiver|gcp_cluster:cluster_wait_for_ingress_ip_address|github_importer:github_import_stage_finish_import|github_importer:github_import_stage_import_issues_and_diff_notes|github_importer:github_import_stage_import_lfs_objects|incident_management:incident_management_process_prometheus_alert|mail_scheduler:mail_scheduler_notification_service|mailers|new_issue|notifications:new_release|pipeline_background:archive_trace|pipeline_processing:pipeline_process|process_commit|update_merge_requests|web_hook"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "2.5"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="300", queue=~"cronjob:import_export_project_cleanup|cronjob:stuck_ci_jobs|cronjob:update_max_seats_used_for_gitlab_com_subscriptions|gcp_cluster:cluster_upgrade_app|invalid_gpg_signature_update|project_export"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"cronjob:import_export_project_cleanup|cronjob:stuck_ci_jobs|cronjob:update_max_seats_used_for_gitlab_com_subscriptions|gcp_cluster:cluster_upgrade_app|invalid_gpg_signature_update|project_export"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "300"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="5", queue=~"create_github_webhook|create_gpg_signature|cronjob:import_software_licenses|cronjob:issue_due_scheduler|cronjob:namespaces_prune_aggregation_schedules|cronjob:pages_domain_ssl_renewal_cron|design_management_new_version|elastic_commit_indexer|gcp_cluster:cluster_provision|gcp_cluster:cluster_update_app|gcp_cluster:cluster_wait_for_app_installation|gcp_cluster:cluster_wait_for_app_update|gcp_cluster:clusters_applications_wait_for_uninstall_app|gcp_cluster:wait_for_cluster_creation|irker|jira_connect:jira_connect_sync_branch|new_epic|new_merge_request|new_note|pipeline_creation:create_pipeline|pipeline_creation:run_pipeline_schedule|pipeline_default:ci_create_cross_project_pipeline|post_receive|repository_update_mirror|todos_destroyer:todos_destroyer_entity_leave"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"create_github_webhook|create_gpg_signature|cronjob:import_software_licenses|cronjob:issue_due_scheduler|cronjob:namespaces_prune_aggregation_schedules|cronjob:pages_domain_ssl_renewal_cron|design_management_new_version|elastic_commit_indexer|gcp_cluster:cluster_provision|gcp_cluster:cluster_update_app|gcp_cluster:cluster_wait_for_app_installation|gcp_cluster:cluster_wait_for_app_update|gcp_cluster:clusters_applications_wait_for_uninstall_app|gcp_cluster:wait_for_cluster_creation|irker|jira_connect:jira_connect_sync_branch|new_epic|new_merge_request|new_note|pipeline_creation:create_pipeline|pipeline_creation:run_pipeline_schedule|pipeline_default:ci_create_cross_project_pipeline|post_receive|repository_update_mirror|todos_destroyer:todos_destroyer_entity_leave"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "5"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="60", queue=~"container_repository:cleanup_container_repository|container_repository:delete_container_repository|cronjob:historical_data|cronjob:pipeline_schedule|cronjob:prune_web_hook_logs|cronjob:remove_expired_members|cronjob:remove_unreferenced_lfs_objects|cronjob:repository_archive_cache|cronjob:stuck_import_jobs|cronjob:trending_projects|delete_merged_branches|delete_stored_files|delete_user|emails_on_push|export_csv|github_importer:github_import_stage_import_repository|group_destroy|import_issues_csv|pages|pipeline_default:store_security_reports|pipeline_processing:ci_build_prepare|repository_cleanup|repository_fork|repository_import|repository_update_remote_mirror"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"container_repository:cleanup_container_repository|container_repository:delete_container_repository|cronjob:historical_data|cronjob:pipeline_schedule|cronjob:prune_web_hook_logs|cronjob:remove_expired_members|cronjob:remove_unreferenced_lfs_objects|cronjob:repository_archive_cache|cronjob:stuck_import_jobs|cronjob:trending_projects|delete_merged_branches|delete_stored_files|delete_user|emails_on_push|export_csv|github_importer:github_import_stage_import_repository|group_destroy|import_issues_csv|pages|pipeline_default:store_security_reports|pipeline_processing:ci_build_prepare|repository_cleanup|repository_fork|repository_import|repository_update_remote_mirror"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "60"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
  - "expr": |
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="600", queue=~"cronjob:gitlab_usage_ping"}[1m])) by (environment, queue, stage, tier, type)
      /
      sum(rate(sidekiq_jobs_completion_seconds_bucket{le="+Inf", queue=~"cronjob:gitlab_usage_ping"}[1m])) by (environment, queue, stage, tier, type) >= 0
    "labels": 
      "threshold": "600"
    "record": "gitlab_background_worker_queue_duration_apdex:ratio"
