# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./scripts/generate-gitlab-dashboards.sh TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
dashboard: general SLAs
panel_groups:
- group: Headline
  panels:
  - title: Weighted Availability Score - GitLab.com
    max_value: 1
    metrics:
    - id: single-stat-weighted-availability
      label: Weighted Availability Score - GitLab.com
      query: avg_over_time(sla:gitlab:ratio{environment="gprd", stage="main"}[7d])
      unit: "%"
    type: single-stat
  - title: Overall SLA over time period - gitlab.com
    metrics:
    - id: line-chart-overall-sla-time-period
      label: gitlab.com SLA
      query_range: clamp_min(clamp_max(avg_over_time(sla:gitlab:ratio{environment="gprd", stage="main"}[1d]),1),0)
      step: 86400
      unit: "%"
    type: line-chart
    y_axis:
      name: SLA
      format: percent
- group: SLA Trends - Per primary service
  panels:
  - title: Primary Services Average Availability for Period - Registry
    max_value: 1
    metrics:
    - id: single-stat-sla-trend-registry
      label: Primary Services Average Availability for Period - Registry
      query: avg(avg_over_time(slo_observation_status{environment="gprd", stage="main", type="registry"}[7d]))
      unit: "%"
    type: single-stat
  - title: Primary Services Average Availability for Period - Api
    max_value: 1
    metrics:
    - id: single-stat-sla-trend-api
      label: Primary Services Average Availability for Period - Api
      query: avg(avg_over_time(slo_observation_status{environment="gprd", stage="main", type="api"}[7d]))
      unit: "%"
    type: single-stat
  - title: Primary Services Average Availability for Period - Git
    max_value: 1
    metrics:
    - id: single-stat-sla-trend-git
      label: Primary Services Average Availability for Period - Git
      query: avg(avg_over_time(slo_observation_status{environment="gprd", stage="main", type="git"}[7d]))
      unit: "%"
    type: single-stat
  - title: Primary Services Average Availability for Period - Sidekiq
    max_value: 1
    metrics:
    - id: single-stat-sla-trend-sidekiq
      label: Primary Services Average Availability for Period - Sidekiq
      query: avg(avg_over_time(slo_observation_status{environment="gprd", stage="main", type="sidekiq"}[7d]))
      unit: "%"
    type: single-stat
  - title: Primary Services Average Availability for Period - Web
    max_value: 1
    metrics:
    - id: single-stat-sla-trend-web
      label: Primary Services Average Availability for Period - Web
      query: avg(avg_over_time(slo_observation_status{environment="gprd", stage="main", type="web"}[7d]))
      unit: "%"
    type: single-stat
  - title: Primary Services Average Availability for Period - Runners
    max_value: 1
    metrics:
    - id: single-stat-sla-trend-runners
      label: Primary Services Average Availability for Period - Runners
      query: avg(avg_over_time(slo_observation_status{environment="gprd", stage="main", type="ci-runners"}[7d]))
      unit: "%"
    type: single-stat
  - title: SLA Trends - Primary Services
    metrics:
    - id: line-chart-sla-trends-primary-services
      label: "{{type}}"
      query_range: >-
        clamp_min(clamp_max(avg(avg_over_time(slo_observation_status{environment="gprd", stage="main",
        type=~"api|web|git|registry|sidekiq|ci-runners"}[1d])) by (type),1),0)
      step: 86400
      unit: "%"
    type: line-chart
    y_axis:
      name: SLA
      format: percent
