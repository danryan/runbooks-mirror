# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./scripts/generate-gitlab-dashboards.sh TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
dashboard: Frontend Services
panel_groups:
- group: 'Web Frontend: gitlab.com web traffic'
  panels:
  - title: 'Latency: Apdex'
    metrics:
    - id: line-chart-latency-apdex-web-service
      label: '{{type}} Service'
      query_range: min(gitlab_service_apdex:ratio_5m{environment="gprd", type="web",
        stage="main"}) by (type)
      unit: '%'
    - id: line-chart-latency-apdex-degradation-webervice
      label: Degradation SLO
      query_range: avg(slo:min:gitlab_service_apdex:ratio{environment="gprd", type="web",
        stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="web"})
      unit: '%'
    - id: line-chart-latency-apdex-outage-webervice
      label: Outage SLO
      query_range: 2 * (avg(slo:min:gitlab_service_apdex:ratio{environment="gprd",
        type="web", stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="web"}))
        - 1
      unit: '%'
    - id: line-chart-latency-apdex-last-week-webervice
      label: Last Week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="web", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Apdex %
  - title: Error Ratios
    metrics:
    - id: line-chart-error-ratios-web-service
      label: '{{type}} service'
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="web", stage="main"}[1m])) by (type)
      unit: '%'
    - id: line-chart-error-ratios-degradation-web-service
      label: Degradation SLO
      query_range: avg(slo:max:gitlab_service_errors:ratio{environment="gprd", type="web",
        stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="web"})
      unit: '%'
    - id: line-chart-error-ratios-outage-web-service
      label: Outage SLO
      query_range: 2 * (avg(slo:max:gitlab_service_errors:ratio{environment="gprd",
        type="web", stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="web"}))
      unit: '%'
    - id: line-chart-error-ratios-last-week-web-service
      label: Last week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="web", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Percentile
- group: 'API: gitlab.com/api traffic'
  panels:
  - title: 'Latency: Apdex'
    metrics:
    - id: line-chart-latency-apdex-api-service
      label: '{{type}} Service'
      query_range: min(gitlab_service_apdex:ratio_5m{environment="gprd", type="api",
        stage="main"}) by (type)
      unit: '%'
    - id: line-chart-latency-apdex-degradation-apiervice
      label: Degradation SLO
      query_range: avg(slo:min:gitlab_service_apdex:ratio{environment="gprd", type="api",
        stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="api"})
      unit: '%'
    - id: line-chart-latency-apdex-outage-apiervice
      label: Outage SLO
      query_range: 2 * (avg(slo:min:gitlab_service_apdex:ratio{environment="gprd",
        type="api", stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="api"}))
        - 1
      unit: '%'
    - id: line-chart-latency-apdex-last-week-apiervice
      label: Last Week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="api", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Apdex %
  - title: Error Ratios
    metrics:
    - id: line-chart-error-ratios-api-service
      label: '{{type}} service'
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="api", stage="main"}[1m])) by (type)
      unit: '%'
    - id: line-chart-error-ratios-degradation-api-service
      label: Degradation SLO
      query_range: avg(slo:max:gitlab_service_errors:ratio{environment="gprd", type="api",
        stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="api"})
      unit: '%'
    - id: line-chart-error-ratios-outage-api-service
      label: Outage SLO
      query_range: 2 * (avg(slo:max:gitlab_service_errors:ratio{environment="gprd",
        type="api", stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="api"}))
      unit: '%'
    - id: line-chart-error-ratios-last-week-api-service
      label: Last week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="api", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Percentile
- group: 'Git: git ssh and https traffic'
  panels:
  - title: 'Latency: Apdex'
    metrics:
    - id: line-chart-latency-apdex-git-service
      label: '{{type}} Service'
      query_range: min(gitlab_service_apdex:ratio_5m{environment="gprd", type="git",
        stage="main"}) by (type)
      unit: '%'
    - id: line-chart-latency-apdex-degradation-gitervice
      label: Degradation SLO
      query_range: avg(slo:min:gitlab_service_apdex:ratio{environment="gprd", type="git",
        stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="git"})
      unit: '%'
    - id: line-chart-latency-apdex-outage-gitervice
      label: Outage SLO
      query_range: 2 * (avg(slo:min:gitlab_service_apdex:ratio{environment="gprd",
        type="git", stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="git"}))
        - 1
      unit: '%'
    - id: line-chart-latency-apdex-last-week-gitervice
      label: Last Week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="git", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Apdex %
  - title: Error Ratios
    metrics:
    - id: line-chart-error-ratios-git-service
      label: '{{type}} service'
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="git", stage="main"}[1m])) by (type)
      unit: '%'
    - id: line-chart-error-ratios-degradation-git-service
      label: Degradation SLO
      query_range: avg(slo:max:gitlab_service_errors:ratio{environment="gprd", type="git",
        stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="git"})
      unit: '%'
    - id: line-chart-error-ratios-outage-git-service
      label: Outage SLO
      query_range: 2 * (avg(slo:max:gitlab_service_errors:ratio{environment="gprd",
        type="git", stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="git"}))
      unit: '%'
    - id: line-chart-error-ratios-last-week-git-service
      label: Last week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="git", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Percentile
- group: CI runners
  panels:
  - title: 'Latency: Apdex'
    metrics:
    - id: line-chart-latency-apdex-ci-runners-service
      label: '{{type}} Service'
      query_range: min(gitlab_service_apdex:ratio_5m{environment="gprd", type="ci-runners",
        stage="main"}) by (type)
      unit: '%'
    - id: line-chart-latency-apdex-degradation-ci-runnerservice
      label: Degradation SLO
      query_range: avg(slo:min:gitlab_service_apdex:ratio{environment="gprd", type="ci-runners",
        stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="ci-runners"})
      unit: '%'
    - id: line-chart-latency-apdex-outage-ci-runnerservice
      label: Outage SLO
      query_range: 2 * (avg(slo:min:gitlab_service_apdex:ratio{environment="gprd",
        type="ci-runners", stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="ci-runners"}))
        - 1
      unit: '%'
    - id: line-chart-latency-apdex-last-week-ci-runnerservice
      label: Last Week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="ci-runners", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Apdex %
  - title: Error Ratios
    metrics:
    - id: line-chart-error-ratios-ci-runners-service
      label: '{{type}} service'
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="ci-runners", stage="main"}[1m])) by (type)
      unit: '%'
    - id: line-chart-error-ratios-degradation-ci-runners-service
      label: Degradation SLO
      query_range: avg(slo:max:gitlab_service_errors:ratio{environment="gprd", type="ci-runners",
        stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="ci-runners"})
      unit: '%'
    - id: line-chart-error-ratios-outage-ci-runners-service
      label: Outage SLO
      query_range: 2 * (avg(slo:max:gitlab_service_errors:ratio{environment="gprd",
        type="ci-runners", stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="ci-runners"}))
      unit: '%'
    - id: line-chart-error-ratios-last-week-ci-runners-service
      label: Last week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="ci-runners", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Percentile
- group: Container registry
  panels:
  - title: 'Latency: Apdex'
    metrics:
    - id: line-chart-latency-apdex-registry-service
      label: '{{type}} Service'
      query_range: min(gitlab_service_apdex:ratio_5m{environment="gprd", type="registry",
        stage="main"}) by (type)
      unit: '%'
    - id: line-chart-latency-apdex-degradation-registryervice
      label: Degradation SLO
      query_range: avg(slo:min:gitlab_service_apdex:ratio{environment="gprd", type="registry",
        stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="registry"})
      unit: '%'
    - id: line-chart-latency-apdex-outage-registryervice
      label: Outage SLO
      query_range: 2 * (avg(slo:min:gitlab_service_apdex:ratio{environment="gprd",
        type="registry", stage="main"}) or avg(slo:min:gitlab_service_apdex:ratio{type="registry"}))
        - 1
      unit: '%'
    - id: line-chart-latency-apdex-last-week-registryervice
      label: Last Week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="registry", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Apdex %
  - title: Error Ratios
    metrics:
    - id: line-chart-error-ratios-registry-service
      label: '{{type}} service'
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="registry", stage="main"}[1m])) by (type)
      unit: '%'
    - id: line-chart-error-ratios-degradation-registry-service
      label: Degradation SLO
      query_range: avg(slo:max:gitlab_service_errors:ratio{environment="gprd", type="registry",
        stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="registry"})
      unit: '%'
    - id: line-chart-error-ratios-outage-registry-service
      label: Outage SLO
      query_range: 2 * (avg(slo:max:gitlab_service_errors:ratio{environment="gprd",
        type="registry", stage="main"}) or avg(slo:max:gitlab_service_errors:ratio{type="registry"}))
      unit: '%'
    - id: line-chart-error-ratios-last-week-registry-service
      label: Last week
      query_range: max(max_over_time(gitlab_service_errors:ratio{environment="gprd",
        type="registry", stage="main"}[1m] offset 1w)) by (type)
      unit: '%'
    type: line-chart
    y_axis:
      format: percent
      name: Percentile
