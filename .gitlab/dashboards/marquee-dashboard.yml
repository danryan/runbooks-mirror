# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./scripts/generate-gitlab-dashboards.sh TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
dashboard: 'marquee: Customer Dashboard'
panel_groups:
- group: Web
  panels:
  - title: Web Latency
    metrics:
    - id: web-latency-marquee-customer
      label: p95
      query_range: >-
        marquee_customers_request_duration_seconds{env="{{environment}}", salesforce_url="https://gitlab.my.salesforce.com/{{customer}}"}
      unit: "%"
    type: area-chart
    y_axis:
      name: SLA
  - title: Web Requests / Second
    metrics:
    - id: web-requests-marquee-customer
      label: RPS
      query_range: >-
        rate(marquee_customers_requests_total{env="{{environment}}", salesforce_url="https://gitlab.my.salesforce.com/{{customer}}"}[{{web_request_interval}}])
      unit: "%"
    type: area-chart
  - title: Web Errors
    metrics:
    - id: web-errors-marquee-customer
      label: Errors
      query_range: >-
        increase(marquee_customers_requests_server_errors_total{env="{{environment}}", salesforce_url="https://gitlab.my.salesforce.com/{{customer}}"}[{{web_errors_interval}}])
      unit: "%"
    type: area-chart
  - title: Error Rate
    metrics:
    - id: error-rate-marquee-customer
      label: Error Rate(%)
      query_range: >-
        clamp_min(clamp_max(rate(marquee_customers_requests_server_errors_total{env="{{environment}}",
        salesforce_url="https://gitlab.my.salesforce.com/{{customer}}"}[{{error_rate_interval}}]) / rate(marquee_customers_requests_total{env="{{environment}}",
        salesforce_url="https://gitlab.my.salesforce.com/{{customer}}"}[{{error_rate_interval}}]),1),0)
      unit: "%"
    type: area-chart
    y_axis:
      name: Percent
templating:
  variables:
    customer: '1'
    environment: gprd
    error_rate_interval: 2m
    web_errors_interval: 2m
    web_request_interval: 2m
