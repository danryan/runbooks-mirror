#!/usr/bin/env bash

function es_client() {
    url=$1
    shift
    curl --retry 3 --fail -H 'Content-Type: application/json' "${ES_URL}/${url}" "$@"
}

function execute_jsonnet() {
    # MARQUEE_CUSTOMERS_TOP_LEVEL_DOMAINS should be comma-delimited
    jsonnet -J "${SCRIPT_DIR}" \
        --ext-str "marquee_customers_top_level_domains=${MARQUEE_CUSTOMERS_TOP_LEVEL_DOMAINS:-}" \
        "$@"
}
