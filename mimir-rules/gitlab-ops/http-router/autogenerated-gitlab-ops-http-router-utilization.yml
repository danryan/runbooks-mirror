# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./mimir-rules-jsonnet/utilization.jsonnet TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
groups:
- name: Utilization Rules (autogenerated)
  interval: 5m
  rules:
  - record: gitlab_component_utilization:blackbox_request_latency_s:1h
    labels:
      component: blackbox_request_latency
      metrics_subsystem: utilization
      resource_labels: instance,phase
      summaryType: aggregate
      type: http-router
      unit: s
    expr: |
      sum by (env,tier,type,stage) (
        probe_http_duration_seconds{env=~"gprd|gstg",type="blackbox"}
      )
  - record: gitlab_component_utilization:pingdom_latency_s:1h
    labels:
      component: pingdom_latency
      metrics_subsystem: utilization
      resource_labels: hostname,name
      summaryType: aggregate
      type: http-router
      unit: s
    expr: |
      sum by (env,tier,type,stage) (
        pingdom_uptime_response_time_seconds{env=~"gprd|gstg",type="pingdom"}
      )
