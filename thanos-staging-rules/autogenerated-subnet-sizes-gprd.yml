---
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: autogenerated-subnet-sizes-gprd
  labels:
    ruler: thanos
    shard: '1'
  annotations: {}
spec:
  groups:
  - name: GCP Subnet size
    interval: 1m
    partial_response_strategy: warn
    rules:
    - record: gitlab:gcp_subnet_max_ips
      labels:
        env: gprd
        environment: gprd
        subnet: gitlab-gke-gprd
      expr: 510
    - record: gitlab:gcp_subnet_max_ips
      labels:
        env: gprd
        environment: gprd
        subnet: gke-us-east1-b-gprd
      expr: 254
    - record: gitlab:gcp_subnet_max_ips
      labels:
        env: gprd
        environment: gprd
        subnet: gke-us-east1-c-gprd
      expr: 254
    - record: gitlab:gcp_subnet_max_ips
      labels:
        env: gprd
        environment: gprd
        subnet: gke-us-east1-d-gprd
      expr: 254
  - name: Subnet Cluster mapping
    interval: 1m
    partial_response_strategy: warn
    rules:
    - record: gitlab:cluster:subnet:mapping
      labels:
        cluster: gprd-gitlab-gke
        env: gprd
        environment: gprd
        subnet: gitlab-gke-gprd
      expr: 1
    - record: gitlab:cluster:subnet:mapping
      labels:
        cluster: gprd-us-east1-b
        env: gprd
        environment: gprd
        subnet: gke-us-east1-b-gprd
      expr: 1
    - record: gitlab:cluster:subnet:mapping
      labels:
        cluster: gprd-us-east1-c
        env: gprd
        environment: gprd
        subnet: gke-us-east1-c-gprd
      expr: 1
    - record: gitlab:cluster:subnet:mapping
      labels:
        cluster: gprd-us-east1-d
        env: gprd
        environment: gprd
        subnet: gke-us-east1-d-gprd
      expr: 1
